# Android 统计功能手工测试步骤

**更新日期**: 2026-01-28  
**范围**: Epic 4 统计与报表（时间维度、类别占比、实时计算）

---

## 前置条件

- 已登录并可进入主界面「已登录」区域。
- 已在记账页录入若干条不同日期、类别的账目（建议覆盖今日、本周、本月、本年及多个类别）。

---

## 1. 进入统计页

1. 在主界面「已登录」状态下点击 **「统计」** 按钮。
2. 应进入统计页（标题「统计」、顶部有返回箭头）。
3. 若会话已过期，点击「统计」时应提示「会话已过期，请重新登录。」且不进入统计页。

---

## 2. 时间维度统计（Story 4.1）

1. 统计页顶部有 **「统计周期」** 下拉：今日、本周、本月、本年。
2. 默认选中 **「本月」**。
3. **合计** 区域显示当前周期内所有账目的总金额（¥ xx.xx）。
4. 切换为 **「今日」**：合计与类别占比仅统计今天的账目。
5. 切换为 **「本周」**：统计本周一至周日的账目。
6. 切换为 **「本年」**：统计当年 1 月 1 日至 12 月 31 日的账目。
7. 切换周期后，合计与下方类别占比应即时更新（实时计算）。

---

## 3. 类别维度统计（Story 4.2）

1. 在 **「类别占比」** 区域，每条显示：类别名称（餐饮/交通/购物/其他）、金额、占比（xx.x%）、进度条。
2. 类别按金额从高到低排序。
3. 占比为该类别金额占当前周期合计的百分比，总和为 100%（四舍五入可能略有偏差）。
4. 切换统计周期（今日/本周/本月/本年）后，类别占比随该周期数据更新。

---

## 4. 消费趋势图与类别分布图（Story 4.3 / 4.4）

1. **消费趋势（柱状图）**：在「合计」下方有 **「消费趋势」** 标题与柱状图。
   - **今日**：单柱「今日」对应当日总金额。
   - **本周**：7 柱「周一」～「周日」，每柱为该日总金额。
   - **本月**：多柱「1日」～「当月最后一日」，每柱为该日总金额。
   - **本年**：12 柱「1月」～「12月」，每柱为该月总金额。
   - 切换周期后柱状图应即时更新。

2. **类别分布（饼图）**：在「消费趋势」下方有 **「类别分布」** 标题与饼图。
   - 各扇区对应类别（餐饮/交通/购物/其他），颜色区分，显示占比（百分比）。
   - 与下方「类别占比」列表数据一致；切换周期后饼图与列表同步更新。

3. **交互与样式**：柱状图 X 轴显示周期内标签；饼图支持图例与百分比；图表随数据更新有简单动画。

---

## 5. 空数据与实时更新（Story 4.5）

1. 选择 **「今日」** 且今日无账目时，应显示 **「该周期暂无账目」** 提示，合计为 ¥ 0.00，类别列表为空。
2. 从统计页返回，进入记账页新增一条今日账目后，再进入统计页、选择「今日」：应看到新账目计入合计与类别占比。
3. 在记账页编辑或删除某条账目后，再进入统计页：对应周期的合计与类别占比应随之更新（无需手动刷新）。

---

## 通过标准

- 登录后能通过「统计」进入统计页；会话过期时无法进入且主界面提示正确。
- 周期切换（今日/本周/本月/本年）正确，合计与类别占比均按所选周期计算。
- 消费趋势柱状图按周期正确显示（今日单柱、本周 7 柱、本月按日、本年 12 月）；类别分布饼图与类别占比列表一致。
- 类别按金额降序、占比正确、进度条与占比一致。
- 该周期无账目时显示「该周期暂无账目」；账目增删改后统计结果与图表实时更新。

# Android 预算功能手工测试步骤

**更新日期**: 2026-01-28  
**范围**: Epic 5 预算管理（月度/年度预算设置、预算 vs 实际、修改/删除）

---

## 前置条件

- 已登录并可进入主界面「已登录」区域。
- 建议先在记账页录入若干条**当月**和**当年**的账目，以便验证「已用」与「剩余」计算。

---

## 1. 进入预算页

1. 在主界面「已登录」状态下点击 **「预算」** 按钮。
2. 应进入预算管理页（标题「预算管理」、顶部有返回箭头）。
3. 若会话已过期，点击「预算」时应提示「会话已过期，请重新登录。」且不进入预算页。

---

## 2. 本月预算：未设置时（Story 5.1）

1. 若**本月尚未设置预算**，应看到 **「本月预算」** 区域下：
   - 文案「本月尚未设置预算」；
   - 输入框「预算金额（元）」；
   - 按钮「设置本月预算」。
2. 在输入框输入正数（如 `5000`），点击 **「设置本月预算」**。
3. 应出现成功提示（如「月度预算已设置」），下方区域切换为**预算状态展示**（预算、已用、剩余、进度条、修改/删除按钮）。
4. 若输入空或非正数再点击「设置本月预算」，应提示金额相关错误或 Toast。

---

## 3. 本月预算：已有预算时（Story 5.3 / 5.5 / 5.6）

1. 当**本月已设置预算**时，应看到：
   - **预算**：¥ xx.xx（设置的金额）；
   - **已用**：¥ xx.xx（当月账目合计，与统计页「本月」合计一致）；
   - **剩余**：¥ xx.xx（预算 − 已用，不低于 0）；
   - **进度条**：已用占比（0–100）；
   - **状态提示**：未超支时显示「已用 xx.x%」；≥80% 时显示「已用 80% 以上，注意控制」；超支时显示「已超支」。
2. 点击 **「修改」**：弹出「修改预算」对话框，可输入新金额，确认后预算更新，状态区刷新。
3. 点击 **「删除」**：弹出「确定删除该预算？」确认框，确认后该预算删除，区域恢复为「未设置」表单。

---

## 4. 本年预算：未设置时（Story 5.2）

1. 若**本年尚未设置预算**，应看到 **「本年预算」** 区域下：
   - 文案「本年尚未设置预算」；
   - 输入框「预算金额（元）」；
   - 按钮「设置本年预算」。
2. 输入正数（如 `60000`），点击 **「设置本年预算」**。
3. 应出现成功提示（如「年度预算已设置」），下方切换为**本年预算状态展示**。

---

## 5. 本年预算：已有预算时（Story 5.3 / 5.5 / 5.6）

1. 当**本年已设置预算**时，应看到：
   - **预算 / 已用 / 剩余**：逻辑同「本月」，但「已用」为当年 1 月 1 日至 12 月 31 日账目合计。
   - **进度条** 与 **状态提示**（已用占比 / 80% 预警 / 已超支）逻辑同本月。
2. **修改**、**删除** 行为同「本月预算」。

---

## 6. 预算超支与预警（Story 5.4）

1. **预警**：当「已用」未超支但占比 ≥ 80% 时，状态提示应显示「已用 80% 以上，注意控制」，颜色可为橙色等醒目样式。
2. **超支**：当「已用」≥ 预算时，状态提示应显示「已超支」，颜色可为红色；进度条可为 100% 或按比例显示。
3. 可通过在记账页增加当月/当年消费后返回预算页，验证「已用」与「剩余」实时变化（需手动返回或重新进入预算页刷新，或依赖后续「实时刷新」实现）。

---

## 7. 通过标准

- 主界面「预算」入口在登录态下可进入，会话过期时不可进入。
- 本月/本年均可独立设置、查看、修改、删除预算。
- 预算金额、已用（当月/当年账目合计）、剩余、进度条、状态提示（含 80% 预警与超支）计算与展示正确。
- 修改与删除有确认流程，操作后界面状态正确更新。

---

**状态**：Epic 5 预算管理手工测试步骤已就绪。

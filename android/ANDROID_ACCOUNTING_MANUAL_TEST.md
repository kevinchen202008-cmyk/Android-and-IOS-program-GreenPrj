# Android 记账功能手工测试步骤

**更新日期**: 2026-01-28  
**范围**: Epic 3 Story 3.1–3.4（录入、列表、编辑、删除）、Epic 2 会话与访问控制

---

## 前置条件

- 在 Android Studio 中打开 `android/` 并成功构建、安装到模拟器或真机。
- 首次运行需先设置密码并登录（或已有密码且会话有效）。

---

## 1. 登录与进入记账

1. 启动应用，若未设置密码则先完成「设置密码」。
2. 使用正确密码登录，进入「已登录：可在此修改密码」区域。
3. 点击 **「进入记账」** 按钮，应进入记账界面（标题「记账」、顶部有返回箭头）。
4. 若会话已过期（超过 30 分钟无操作），再次点击「进入记账」时应在主界面提示「会话已过期，请重新登录。」且不进入记账页。

---

## 2. 手动录入账目（Story 3.1）

1. 在记账界面填写：
   - **金额**：大于 0 的数字（如 `88.5`）。
   - **日期**：默认当天，可改为 `yyyy-MM-dd` 格式（如 `2026-01-28`）。
   - **类别**：从下拉选择（餐饮 / 交通 / 购物 / 其他）。
   - **备注**：选填。
2. 点击 **「确认入账」**。
3. 应出现「已保存」提示，表单清空，日期重置为当天，下方列表立即出现新记录（金额、类别、日期、备注）。

**校验**：

- 金额为空或 ≤ 0 时，应提示错误且不保存。
- 日期格式错误（非 yyyy-MM-dd）时，应提示「日期格式请使用 yyyy-MM-dd」。
- 未选类别时，应提示「请选择类别」。

---

## 3. 账目列表查看（Story 3.2）

1. 在记账界面下方「账目列表」区域，应看到已保存的账目，按日期倒序（最新在上）。
2. 每条显示：金额（¥ xx.xx）、类别（中文标签）、日期；有备注时显示备注。
3. 再录入几条不同日期/类别的记录，列表应实时更新且顺序正确。

---

## 4. 会话与访问控制

1. 在记账界面按返回键回到主界面。
2. 若在 30 分钟内再次点击「进入记账」，应正常进入。
3. （可选）将设备时间调快 30 分钟以上，或等待 30 分钟后，再点击「进入记账」：主界面应提示会话过期并停留在登录态；若通过其他方式（如最近任务）直接打开记账页，应立即退出该页（finish）。

---

## 5. 账目编辑（Story 3.3）

1. 在账目列表中 **点击** 任意一条记录。
2. 表单应预填该条目的金额、日期、类别、备注，按钮变为 **「保存修改」**。
3. 修改金额或备注后点击「保存修改」，应出现「已更新」提示，列表该项立即更新。
4. 保存后表单清空、按钮恢复为「确认入账」，可继续新建账目。

---

## 6. 账目删除（Story 3.4）

1. 在账目列表中 **长按** 任意一条记录。
2. 应弹出对话框「确定删除这条账目？」，提供「删除」「取消」。
3. 点击「取消」：对话框关闭，列表无变化。
4. 点击「删除」：该条从列表消失，并出现「已删除」提示。
5. 若当前正在编辑该条（表单预填为该条），删除后表单清空、按钮恢复为「确认入账」。

---

## 7. 修改密码与再登录

1. 在主界面「已登录」状态下修改密码，成功后仍处于已登录态。
2. 点击「进入记账」应仍可进入；退出到主界面后点击「退出登录」（若有）或等待会话过期后，需重新输入新密码登录再进入记账。

---

## 通过标准

- 登录后能通过「进入记账」进入记账界面；会话过期后无法进入且主界面提示正确。
- 能正确录入金额、日期、类别、备注并保存，列表即时更新、倒序正确。
- 表单校验（金额、日期、类别）符合上述描述。
- 点击列表项进入编辑、预填与保存修改正确；长按列表项弹出删除确认，删除后列表更新。
- 返回主界面后再次进入记账、会话与访问控制行为符合预期。
